<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title><%= dadosEmpresa[0].nome_fantasia ?? 'Bem vindo' %></title>
    <!-- BOOTSTRAP ICONS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <!-- TAILWINDCSS -->
    <link rel="stylesheet" href="/css/output.css">
    <!-- AXIOS -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">


</head>
<body class="max-w-screen-md md:max-w-none m-auto relative">

    <%- include('components/aviso', {aviso: "VENDAS SOMENTE PARA REGIÃO NORTE"}) %>
    <%- include('components/navbar') %>
    
    <script>
        let deferredPrompt;

        window.addEventListener('beforeinstallprompt', (e) => {
        // Evita que o prompt padrão seja exibido
        e.preventDefault();
        // Guarda o evento para que possa ser utilizado posteriormente
        deferredPrompt = e;

        // Exibe um botão ou qualquer elemento que inicie a instalação
        // Por exemplo, um botão que dispara a instalação
        let installButton = document.createElement('button');
        installButton.textContent = 'Instalar';
        installButton.addEventListener('click', (e) => {
            // Exibe o prompt de instalação
            deferredPrompt.prompt();

            // Aguarda o usuário responder ao prompt de instalação
            deferredPrompt.userChoice.then((choiceResult) => {
            if (choiceResult.outcome === 'accepted') {
                console.log('Usuário aceitou a instalação');
            } else {
                console.log('Usuário recusou a instalação');
            }
            // Limpa a variável para o próximo evento de instalação
            deferredPrompt = null;
            });
        });

        // Adiciona o botão em algum lugar do seu DOM (por exemplo, no corpo da página)
        document.body.appendChild(installButton);
        });

    </script>
    <%- include('components/modal') %>
    <%- include('components/menu') %>
    <%- include('components/carrinho') %>
    <%- include('components/categorias', {data: categorias}) %>

    <!-- BANNERS -->
    <% if (typeof banners != "undefined" && banners && banners.length > 0) { %>
        <%- include('components/carroselBanner', {banners}) %>
    <% } %>

    <!-- CARROSEL DE PRODUTOS -->
    <% if (typeof carroselProdutos != "undefined" && carroselProdutos.length > 0) { %>
        <%- include('components/carroselProdutos', carroselProdutos) %>
    <% } %>

    <%- include('components/newsletter') %>

    <% if (typeof dadosEmpresa.instagram != "undefined" && dadosEmpresa && dadosEmpresa.length > 0) { %>
        <%- include('components/sigaNoInstagram', {data: dadosEmpresa[0]}) %>
    <% } %>

    <%- include('components/footer', {
        data: dadosEmpresa, 
        enderecosEmpresa: enderecosEmpresa,
        redesSociais: redesSociais
    }) %>

    <!-- botão flutuante -->
    <% if (typeof dadosEmpresa[0].whatsapp != "undefined" && dadosEmpresa[0].whatsapp ) { %>
        <%- include('components/btnWhatsapp', {whatsapp: dadosEmpresa[0].whatsapp}) %>
    <% } %>

</body>
</html>
 

<script src="/js/loja/components/modal.js"></script>
<script src="/js/loja/components/carrinho.js"></script>