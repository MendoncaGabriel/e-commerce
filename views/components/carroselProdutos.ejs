
<% 
    function gerarIdAleatorio() {
        const idAleatorio = Math.random().toString(36).substr(2, 9);
        return 'id' + idAleatorio;
    }
    const id = gerarIdAleatorio()
    const left =  gerarIdAleatorio()
    const right =  gerarIdAleatorio()
%>

<section class="py-5 relative">
    <% if (typeof titulo != "undefined" && titulo) { %>
        <h2 class="text-2xl text-center font-semibold text-gray-700">
            <%= titulo  %>
        </h2>
    <% } %>

    <button id="<%= left %>" class="absolute top-1/2 left-2 w-10 h-10 flex items-center justify-center text-4xl opacity-75 text-gray-500 hover:text-black ">
        <i class="bi bi-arrow-left-circle-fill"></i>
    </button>
    <button id="<%= right %>" class="absolute top-1/2 right-2 w-10 h-10 flex items-center justify-center text-4xl opacity-75 text-gray-500 hover:text-black ">
        <i class="bi bi-arrow-right-circle-fill"></i>
    </button>
    

    <div id="<%= id  %>" class="flex p-5 w-full space-x-5 overflow-x-auto snap-x snap-mandatory duration-300">
        

        <% if (typeof produtos != "undefined" && produtos) { %>
            <!-- filtrar 1 item por variante -->
            <%
                const filtro = produtos.filter((obj, index) => {
                    return index === produtos.findIndex((t) => t.produto_id === obj.produto_id);
                });

            %>
            <% filtro.forEach(e => { %>
                <% console.log(e) %>
                <%- include('cardProduto', {data: e}) %>
                
            <% }) %>
        <% } %>
    </div>
</section>

<script>
    // controle de  rolagem
    document.getElementById('<%= left %>').addEventListener('click', () => {
        const ulElement = document.querySelector('#<%= id  %>');
        const scrollAmount = ulElement.scrollLeft - 244;
        ulElement.scrollTo({
            left: scrollAmount,
            behavior: 'smooth'
        });
    })
    document.getElementById('<%= right %>').addEventListener('click', () => {
        const ulElement = document.querySelector('#<%= id  %>');
        const scrollAmount = ulElement.scrollLeft + 244;
        ulElement.scrollTo({
            left: scrollAmount,
            behavior: 'smooth'
        });
    })
</script>